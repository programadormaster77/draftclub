// ===============================================================
// üîí Storage Security Rules ‚Äî DraftClub v1.0
// ===============================================================
// Protege las subidas multimedia de posts, perfiles y rooms.
// ===============================================================

rules_version = '2';

service firebase.storage {
  match /b/{bucket}/o {

    // ===========================================================
    // üì∑ Avatares de usuario
    // ===========================================================
    match /uploads/{uid}/avatars/{fileName} {
      allow read: if true; // p√∫blicos
      allow write: if request.auth != null && request.auth.uid == uid;
    }

    // ===========================================================
    // üèûÔ∏è Fotos del feed social
    // ===========================================================
    match /uploads/{uid}/photos/{postId}/{fileName} {
      allow read: if true;
      allow write: if request.auth != null && request.auth.uid == uid;
    }

    // ===========================================================
    // üé• Videos del feed social + miniaturas
    // ===========================================================
    match /uploads/{uid}/videos/{postId}/{fileName} {
      allow read: if true;
      allow write: if request.auth != null && request.auth.uid == uid;
    }

    // ===========================================================
    // üß± Por defecto, todo lo dem√°s est√° bloqueado
    // ===========================================================
    match /{allPaths=**} {
      allow read, write: if false;
    }
  }
}