# ================================================
# ‚úÖ DraftClub ‚Äî Podfile universal (local + CI)
# ================================================

platform :ios, '13.0'

ENV['COCOAPODS_DISABLE_STATS'] = 'true'

project 'Runner', {
  'Debug' => :debug,
  'Profile' => :release,
  'Release' => :release,
}

use_frameworks!
use_modular_headers!

# ‚úÖ Detecta autom√°ticamente la ruta de Flutter en CI o local
flutter_application_path = File.expand_path(File.join('..', '..'))

# Busca el archivo podhelper.rb, est√© donde est√©
podhelper_path = File.join(flutter_application_path, 'Flutter', 'podhelper.rb')
unless File.exist?(podhelper_path)
  podhelper_path = File.join(flutter_application_path, '.ios', 'Flutter', 'podhelper.rb')
end

raise "‚ùå No se encontr√≥ podhelper.rb en #{flutter_application_path}" unless File.exist?(podhelper_path)
load podhelper_path

target 'Runner' do
  flutter_ios_podfile_setup

  # üîπ Plugins adicionales si aplica
  pod 'Firebase/Core'
  pod 'Firebase/Messaging'

  install_all_flutter_pods File.dirname(File.realpath(__FILE__))
end

post_install do |installer|
  installer.pods_project.targets.each do |target|
    flutter_additional_ios_build_settings(target)
  end
end
